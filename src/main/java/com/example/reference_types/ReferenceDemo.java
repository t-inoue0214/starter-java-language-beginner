package com.example.reference_types;

/**
 * プリミティブ型(int)と、ラッパークラス(Integer)の違いを学ぶクラスです。
 * 「==」演算子が、参照型では「同じ住所か？」の確認になってしまう危険性を体験します。
 */
public class ReferenceDemo {

    public static void main(String[] args) {

        // ---------------------------------------------------------
        // 1. プリミティブ型 (int) の場合
        // 箱の中に「値そのもの」が入っている
        // ---------------------------------------------------------
        System.out.println("=== プリミティブ型 (int) ===");
        int a = 100;
        int b = 100;

        // 値同士の比較になるので、当然 true
        if (a == b) {
            System.out.println("aとbは同じ値です (true)");
        }

        // ---------------------------------------------------------
        // 2. 参照型 (Integer) の場合
        // 箱の中には「データの住所」が入っている
        // ※ Integerは int をオブジェクト(物体)として扱うための型です
        // ---------------------------------------------------------
        System.out.println("\n=== 参照型 (Integer) ===");
        
        // 「new Integer」は「新しいメモリ領域(場所)を作る」という意味
        // つまり、数字は同じでも「違う場所にあるデータ」として作られる
        Integer x = new Integer(500); // 住所X に500がある
        Integer y = new Integer(500); // 住所Y に500がある

        // 【危険！】参照型の「==」は「中身」ではなく「住所」を比較してしまう！
        if (x == y) {
            System.out.println("xとyは同じ場所です");
        } else {
            System.out.println("xとyは違う場所(インスタンス)です (false)");
        }

        // ---------------------------------------------------------
        // 3. 正しい比較方法 (equals)
        // 参照型の中身を比較したいときは、必ず .equals() を使う
        // ---------------------------------------------------------
        if (x.equals(y)) {
            System.out.println("xとyの中身は同じです！ (true) -> 正解");
        }

        // ---------------------------------------------------------
        // 4. オートボクシング (Auto-boxing)
        // 実は Java は int と Integer を自動変換してくれる便利機能がある
        // ---------------------------------------------------------
        Integer z = 500; // new Integer(500) と書かなくても、自動でオブジェクトにしてくれる
        int num = z;     // オブジェクトから値を自動で取り出してくれる(アンボクシング)
        
        System.out.println("\n変換された値: " + num);
    }
}