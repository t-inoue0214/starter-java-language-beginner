# 第2章: データの実体と"リモコン"（参照型とメモリ）

前のリポジトリで、変数は「値を入れる箱」だと学びました。

しかし、Javaの世界には **「箱に入り切らない大きなデータ（オブジェクト）」** がたくさんあります。

この章では、初心者が必ずつまずく **「参照型（Reference Type）」** の正体を暴きます。

ここを理解しないと、「コピーしたはずなのに元の値が変わる」「`==` で比較しても `false` になる」というバグに一生悩まされます。

## 1. メモリの世界地図（スタックとヒープ）

Javaがプログラムを動かすとき、メモリ（作業机）を2つのエリアに分けて使っています。

1. **スタック領域 (Stack)**:
   * **「手元のメモ帳」** です。
   * 処理が速いですが、小さなデータしか置けません。
   * **プリミティブ型 (`int`, `boolean`など)** は、ここに直接値が書き込まれます。

2. **ヒープ領域 (Heap)**:
   * **「遠くにある巨大倉庫」** です。
   * どんな大きなデータ（配列、クラス、Stringなど）も置けます。
   * **参照型**のデータ実体は、すべてここに作られます。

## 2. 参照型とは「倉庫の鍵」である

プリミティブ型と参照型は、変数の箱の中に入っているものが全く違います。

* **プリミティブ型の変数**:
  * 箱の中身：**「値そのもの」** (例: `100`)
  * イメージ：財布の中に入っている現金。

* **参照型の変数**:
  * 箱の中身：**「倉庫の住所（ID）」** (例: `0x1234abcd`)
  * イメージ：巨大倉庫の **「鍵（またはリモコン）」**。
  * 「参照（Reference）」とは、この「住所情報」のことです。
  * 参照型クラスに入っている値はプリミティブ型のデータの住所を参照しています。

## 3. よくある落とし穴

### Q. なぜ参照型を `==` で比較してはいけないの？

A. `==` は **「箱の中身（住所）」** が一致しているかを見るからです。
中身のデータ（倉庫にある荷物）が同じでも、保管場所（住所）が違えば `false` になります。その逆も同じで中身のデータを同じものを入れたつもりでも、保管場所（住所）が異なれば一致しません。

### Q. 参照型をメソッドに渡すとどうなる？

A. **「鍵のコピー」** が渡されます。
合鍵を持った人が倉庫に入って中身を書き換えたら、あなたが持っている鍵で開けたときも、中身が変わっています（これを副作用といいます）。

この章のコードで、実際にこの「副作用」と「比較の罠」を体験してみましょう。
